(this["webpackJsonpConnect-Two-Game"]=this["webpackJsonpConnect-Two-Game"]||[]).push([[0],{15:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var r=n(8),i=n.n(r),a=n(9),o=n(2),s=n(3),l=n(5),c=n(4),u=n(1),p=n.n(u),h=n(7),v=n.n(h),f=(n(15),{0:["[2@1]","[3@1]","[4@1]","[10@1]","[11@1]","[12@1]","[3@2]","[4@2]","[5@2]","[9@2]","[10@2]","[11@2]","[1@3]","[4@3]","[5@3]","[6@3]","[8@3]","[9@3]","[10@3]","[13@3]","[1@4]","[2@4]","[5@4]","[6@4]","[7@4]","[8@4]","[9@4]","[12@4]","[13@4]","[1@5]","[2@5]","[3@5]","[7@5]","[11@5]","[12@5]","[13@5]","[2@6]","[3@6]","[4@6]","[10@6]","[11@6]","[12@6]"],1:["[3@1]","[5@1]","[7@1]","[9@1]","[11@1]","[13@1]","[2@2]","[4@2]","[6@2]","[8@2]","[10@2]","[12@2]","[1@3]","[3@3]","[5@3]","[7@3]","[9@3]","[11@3]","[13@3]","[2@4]","[4@4]","[6@4]","[8@4]","[10@4]","[12@4]","[1@5]","[3@5]","[5@5]","[7@5]","[9@5]","[11@5]","[13@5]","[2@6]","[4@6]","[6@6]","[8@6]","[10@6]","[12@6]","[1@7]","[3@7]","[5@7]","[7@7]","[9@7]","[11@7]"],2:["[1@1]","[3@1]","[5@1]","[7@1]","[9@1]","[11@1]","[13@1]","[1@2]","[3@2]","[5@2]","[7@2]","[9@2]","[11@2]","[13@2]","[1@3]","[3@3]","[5@3]","[9@3]","[11@3]","[13@3]","[1@4]","[3@4]","[11@4]","[13@4]","[1@5]","[3@5]","[5@5]","[9@5]","[11@5]","[13@5]","[1@6]","[3@6]","[5@6]","[7@6]","[9@6]","[11@6]","[13@6]","[1@7]","[3@7]","[5@7]","[7@7]","[9@7]","[11@7]","[13@7]"],3:["[1@1]","[3@1]","[6@1]","[8@1]","[11@1]","[13@1]","[1@2]","[3@2]","[6@2]","[8@2]","[11@2]","[13@2]","[1@3]","[3@3]","[6@3]","[8@3]","[11@3]","[13@3]","[1@4]","[2@4]","[3@4]","[6@4]","[8@4]","[11@4]","[12@4]","[13@4]","[1@5]","[3@5]","[6@5]","[8@5]","[11@5]","[13@5]","[1@6]","[3@6]","[6@6]","[8@6]","[11@6]","[13@6]","[1@7]","[3@7]","[6@7]","[8@7]","[11@7]","[13@7]"],4:["[1@1]","[2@1]","[3@1]","[11@1]","[12@1]","[13@1]","[2@2]","[3@2]","[4@2]","[10@2]","[11@2]","[12@2]","[3@3]","[4@3]","[5@3]","[9@3]","[10@3]","[11@3]","[4@4]","[5@4]","[6@4]","[7@4]","[8@4]","[9@4]","[10@4]","[3@5]","[4@5]","[5@5]","[9@5]","[10@5]","[11@5]","[2@6]","[3@6]","[4@6]","[10@6]","[11@6]","[12@6]","[1@7]","[2@7]","[3@7]","[10@7]","[11@7]","[12@7]","[13@7]"]}),d=n(0),m=["boluo","caomei","juzi","liulian","mihoutao","sangshen","xigua","yezi","shanzha","pingguo","li","ningmeng","huolongguo","putao","lanmei"],j=function(t){Object(l.a)(n,t);var e=Object(c.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(t){var e=this,n=("undefined.png"!==this.props.img).toString();return Object(d.jsx)("button",{className:"square",value:this.props.value,id:this.props.id,isprev:this.props.isprev,iscurr:this.props.iscurr,img:this.props.img,istip:this.props.istip,onClick:function(){return e.props.onClick()},children:Object(d.jsx)("img",{className:"icon",src:"".concat("/Connect-Two-Game","/assets/img/").concat(this.props.img),alt:this.props.value,show:n})})}}]),n}(p.a.Component),g=p.a.createElement,b=function(t){Object(l.a)(n,t);var e=Object(c.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"renderSquare",value:function(t,e,n,r,i){var a,o=this,s=m[t[e]]+".png";return"null"!==i&&null!==i&&(a=i.split("&")),a&&a.includes(e)?Object(d.jsx)(j,{className:"square",value:t[e],id:e,onClick:function(){return o.props.onClick(e)},isprev:(e===n&&null!==n&&void 0!==n).toString(),iscurr:(e===r&&null!==r&&void 0!==r).toString(),istip:"true",img:s},e):Object(d.jsx)(j,{className:"square",value:t[e],id:e,onClick:function(){return o.props.onClick(e)},isprev:(e===n&&null!==n&&void 0!==n).toString(),iscurr:(e===r&&null!==r&&void 0!==r).toString(),istip:"false",img:s},e)}},{key:"render",value:function(t){for(var e=this.props.version.map,n=this.props.prev,r=this.props.curr,i=this.props.tiptool,a=0,o=[];a<9;){for(var s=[],l=0;l<15;){var c=T([l,a]);e[c]=c in e?e[c]:"null";var u=this.renderSquare(e,c,n,r,i);s.push(u),l++}o.push(g("div",{className:"board-row",key:"".concat(a)},s)),a++}return g("div",{className:"board-container"},o)}}]),n}(p.a.Component),O=function(t){Object(l.a)(n,t);var e=Object(c.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(t){var e=this;return Object(d.jsxs)("div",{className:"toolbar",children:[Object(d.jsxs)("button",{className:"tool",children:["TIP",Object(d.jsx)("img",{src:"".concat("/Connect-Two-Game","/assets/tools/bulb.png"),alt:"tip",onClick:function(){return e.props.onClick("tip")}})]}),Object(d.jsxs)("button",{className:"tool",children:["RESET",Object(d.jsx)("img",{src:"".concat("/Connect-Two-Game","/assets/tools/reset.png"),alt:"reset",onClick:function(){return e.props.onClick("reset")}})]})]})}}]),n}(p.a.Component),k=function(t){Object(l.a)(n,t);var e=Object(c.a)(n);function n(t){var r;Object(o.a)(this,n),r=e.call(this,t);var i=x(f[0]),a=S(i),s=w(M(i,15,9)),l=N(s,a);return r.state={history:[{map:i,sameValueMap:a,extendMap:s,goodPairs:l}],level:0,inGame:!1,prevSelection:null,currSelection:null,tiptool:null},r}return Object(s.a)(n,[{key:"handleClick",value:function(t){var e=this.state.history.slice(),n=e[e.length-1],r=n.map,i=n.goodPairs,a=t,o=this.state.currSelection;if("null"!==r[t]&&t!==o){var s=a+"&"+o,l=o+"&"+a;if(s in i||l in i){var c=Object.assign({},r);c[o]="null",c[a]="null",s in i?this.drawLine(i[s]):l in i&&this.drawLine(i[l]);var u=S(c),p=w(M(c,15,9)),h=N(p,u);Object.keys(c).filter((function(t){return"null"!==c[t]}));this.setState({history:e.concat([{map:c,sameValueMap:u,goodPairs:h,extendMap:p}]),currSelection:null,prevSelection:null,tiptool:null})}else this.setState({prevSelection:this.state.currSelection,currSelection:t,tiptool:null})}}},{key:"useTools",value:function(t){"tip"===t?this.useTip():this.resetPattern()}},{key:"useTip",value:function(){var t=this.state.history.slice(),e=t[t.length-1].goodPairs,n=Object.keys(e)[0];this.setState({tiptool:n}),this.drawLine(e[n])}},{key:"resetPattern",value:function(){var t=this.state.history.slice(),e=t[t.length-1],n=e.map,r={},i=e.sameValueMap,a=[];for(var o in i)for(var s=0;s<i[o].length;s++)a.push(o);var l=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}(a);for(var c in n)r[c]="null"===n[c]?"null":l.pop();var u=S(r),p=w(r),h=N(p,u);this.setState({history:t.concat([{map:r,sameValueMap:u,extendMap:p,goodPairs:h}]),prevSelection:null,currSelection:null,tiptool:null})}},{key:"drawLine",value:function(t){console.log(t);var e=document.getElementById("canvas"),n=e.getContext("2d");n.beginPath(),n.lineWidth="2",n.strokeStyle="#e7eaf9";for(var r=t.split("->"),i=0;i<r.length-1;i++){var a=r[i],o=r[i+1];n.moveTo(C(a).x,C(a).y),n.lineTo(C(o).x,C(o).y)}n.stroke(),setTimeout((function(){n.clearRect(0,0,e.width,e.height)}),300)}},{key:"componentDidUpdate",value:function(){var t=Object(a.a)(i.a.mark((function t(){var e,n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("component updated!"),e=this.state.history.slice(),n=e[e.length-1],r=n.map,0===Object.keys(r).filter((function(t){return"null"!==r[t]})).length&&this.nextLevel();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"nextLevel",value:function(){var t=this.state.level<Object.keys(f).length-1?this.state.level+1:0;console.log(t);var e=x(f[t]),n=S(e),r=w(M(e,15,9)),i=N(r,n);this.setState({history:this.state.history.concat([{map:e,sameValueMap:n,extendMap:r,goodPairs:i}]),inGame:!1,level:t,prevSelection:null,currSelection:null,tiptool:null}),this.forceUpdate()}},{key:"render",value:function(t){var e=this,n=this.state.history.slice(),r=n[n.length-1];return Object(d.jsxs)("div",{className:"all",children:[Object(d.jsx)("h1",{className:"Title",children:" Connect 2 "}),Object(d.jsxs)("p",{className:"level-indicator",children:[" Level ",this.state.level," "]}),Object(d.jsx)("div",{className:"board",children:function(){if(e.state.inGame)return Object(d.jsxs)("div",{className:"game",children:[Object(d.jsx)(b,{version:r,onClick:function(t){return e.handleClick(t)},prev:e.state.prevSelection,curr:e.state.currSelection,tiptool:e.state.tiptool}),Object(d.jsx)(O,{onClick:function(t){return e.useTools(t)}})]});var t=1===e.state.history.length?"start":"restart",n=0===e.state.level?t:"next";return Object(d.jsx)("button",{className:"start",onClick:function(){return e.setState({inGame:!0})},children:n})}()}),Object(d.jsx)("canvas",{id:"canvas",height:"325",width:"650"})]})}}]),n}(p.a.Component),y=m.length;function x(t){for(var e=t.length,n=Math.min(e/2,y),r={},i={},a=Math.floor(e/2/n),o=e%n/2,s=0;s<n;s++)i[s]=o>0?2*(a+1):2*a,o--;for(var l=0;l<e;l++){for(var c=t[l],u=Math.floor(Math.random()*n);c in r||0===i[u];)u=Math.floor(Math.random()*n);r[c]=u,i[u]--}return r}function S(t){var e={};for(var n in t){var r=t[n];"null"!==r&&(e[r]=e[r]?e[r].concat([n]):[n])}return e}function C(t){return{x:35*P(t).first+117-35,y:35*P(t).second+62-35}}function M(t,e,n){for(var r={},i=0;i<n;){for(var a=0;a<e;){var o=T([a,i]);r[o]=o in t?t[o]:"null",a++}i++}return r}function w(t){var e={};for(var n in t)e[n]=G(t,n);return e}function N(t,e){var n={};for(var r in e)for(var i=e[r],a=0;a<i.length;a++)for(var o=0;o<i.length;o++)if(a!==o){var s=L(i[a],i[o],t);void 0!==s&&null!==s&&(i[o]+"&"+i[a]in n||(n[i[a]+"&"+i[o]]=s))}return n}function T(t){return"["+t[0]+"@"+t[1]+"]"}function P(t){return{first:parseInt(t.substring(t.indexOf("[")+1,t.indexOf("@"))),second:parseInt(t.substring(t.indexOf("@")+1,t.indexOf("]")))}}function G(t,e){for(var n=P(e).second,r=P(e).first,i=[],a=n-1;a>=0;){var o=T([r,a]);if("null"!==t[o])break;i.push(o),a--}for(var s=n+1;s<9;){var l=T([r,s]);if("null"!==t[l])break;i.push(l),s++}for(var c=r+1;c<=15;){var u=T([c,n]);if("null"!==t[u])break;i.push(u),c++}for(var p=r-1;p>=0;){var h=T([p,n]);if("null"!==t[h])break;i.push(h),p--}return i.join("->")}function L(t,e,n){var r=n[t].split("->"),i=n[e].split("->"),a=P(t).first,o=P(t).second,s=P(e).first,l=P(e).second;if(a===s&&1===Math.abs(o-l))return[t,e].join("->");if(o===l&&1===Math.abs(a-s))return[t,e].join("->");if(!r)return null;if(!i)return null;for(var c=0;c<r.length;c++)for(var u=0;u<i.length;u++)if(r[c]===i[u])return[t,r[c],e].join("->");for(c=0;c<r.length;c++)for(u=0;u<i.length;u++){var p=P(r[c]).first,h=P(r[c]).second,v=P(i[u]).first,f=P(i[u]).second;if(p===v&&n[i[u]].includes(r[c]))return[t,r[c],i[u],e].join("->");if(h===f&&n[i[u]].includes(r[c]))return[t,r[c],i[u],e].join("->")}return null}e.default=k;v.a.render(Object(d.jsx)(k,{}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.b3ef5319.chunk.js.map